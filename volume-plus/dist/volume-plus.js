!async function(){for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));var a,o,v,d,w,c,b,u,x,S,E,e,t,n,s,i,k,l;a=Object.create,o=Object.defineProperty,v=Object.defineProperties,d=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertyNames,b=Object.getOwnPropertySymbols,u=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,E=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,n=(e=(e,t)=>function(){return t||(0,e[c(e)[0]])((t={exports:{}}).exports,t),t.exports})({"external-global-plugin:react-dom"(e,t){t.exports=Spicetify.ReactDOM}}),s=(t=(e,t,n)=>{n=null!=e?a(u(e)):{};var i=!t&&e&&e.__esModule?n:o(n,"default",{value:e,enumerable:!0}),l=e,r=void 0,s=void 0;if(l&&"object"==typeof l||"function"==typeof l)for(let e of c(l))x.call(i,e)||e===r||o(i,e,{get:()=>l[e],enumerable:!(s=d(l,e))||s.enumerable});return i})(e({"external-global-plugin:react"(e,t){t.exports=Spicetify.React}})()),i=t(n()),k=class{constructor(e,t,n={}){this.name=e,this.settingsId=t,this.initialSettingsFields=n,this.settingsFields=this.initialSettingsFields,this.setRerender=null,this.pushSettings=async()=>{for(Object.entries(this.settingsFields).forEach(([e,t])=>{"button"!==t.type&&void 0===this.getFieldValue(e)&&this.setFieldValue(e,t.defaultValue)});!Spicetify?.Platform?.History?.listen;)await new Promise(e=>setTimeout(e,100));this.stopHistoryListener&&this.stopHistoryListener(),this.stopHistoryListener=Spicetify.Platform.History.listen(e=>{"/preferences"===e.pathname&&this.render()}),"/preferences"===Spicetify.Platform.History.location.pathname&&await this.render()},this.rerender=()=>{this.setRerender&&this.setRerender(Math.random())},this.render=async()=>{for(;!document.getElementById("desktop.settings.selectLanguage");){if("/preferences"!==Spicetify.Platform.History.location.pathname)return;await new Promise(e=>setTimeout(e,100))}var e=document.querySelector(".main-view-container__scroll-node-child main div");if(!e)return console.error("[spcr-settings] settings container not found");let t=Array.from(e.children).find(e=>e.id===this.settingsId);t?console.log(t):((t=document.createElement("div")).id=this.settingsId,e.appendChild(t)),i.default.render(s.default.createElement(this.FieldsContainer,null),t)},this.addButton=(e,t,n,i,l)=>{this.settingsFields[e]={type:"button",description:t,value:n,events:{onClick:i,...l}}},this.addInput=(e,t,n,i,l,r)=>{this.settingsFields[e]={type:"input",description:t,defaultValue:n,inputType:l,events:{onChange:i,...r}}},this.addHidden=(e,t)=>{this.settingsFields[e]={type:"hidden",defaultValue:t}},this.addToggle=(e,t,n,i,l)=>{this.settingsFields[e]={type:"toggle",description:t,defaultValue:n,events:{onChange:i,...l}}},this.addDropDown=(e,t,n,i,l,r)=>{this.settingsFields[e]={type:"dropdown",description:t,defaultValue:n[i],options:n,events:{onSelect:l,...r}}},this.getFieldValue=e=>JSON.parse(Spicetify.LocalStorage.get(this.settingsId+"."+e)||"{}")?.value,this.setFieldValue=(e,t)=>{Spicetify.LocalStorage.set(this.settingsId+"."+e,JSON.stringify({value:t}))},this.FieldsContainer=()=>{var[e,t]=(0,s.useState)(0);return this.setRerender=t,s.default.createElement("div",{className:"x-settings-section",key:e},s.default.createElement("h2",{className:"TypeElement-cello-textBase-type"},this.name),Object.entries(this.settingsFields).map(([e,t])=>s.default.createElement(this.Field,{nameId:e,field:t})))},this.Field=n=>{var e=this.settingsId+"."+n.nameId;let t;if(t="button"===n.field.type?n.field.value:this.getFieldValue(n.nameId),"hidden"===n.field.type)return s.default.createElement(s.default.Fragment,null);const[i,l]=(0,s.useState)(t),r=e=>{void 0!==e&&(l(e),this.setFieldValue(n.nameId,e))};return s.default.createElement("div",{className:"x-settings-row"},s.default.createElement("div",{className:"x-settings-firstColumn"},s.default.createElement("label",{className:"TypeElement-viola-textSubdued-type",htmlFor:e},n.field.description||"")),s.default.createElement("div",{className:"x-settings-secondColumn"},"input"===n.field.type?s.default.createElement("input",{className:"x-settings-input",id:e,dir:"ltr",value:i,type:n.field.inputType||"text",...n.field.events,onChange:e=>{r(e.currentTarget.value);var t=n.field.events?.onChange;t&&t(e)}}):"button"===n.field.type?s.default.createElement("span",null,s.default.createElement("button",{id:e,className:"Button-sc-y0gtbx-0 Button-small-buttonSecondary-useBrowserDefaultFocusStyle x-settings-button",...n.field.events,onClick:e=>{r();var t=n.field.events?.onClick;t&&t(e)},type:"button"},i)):"toggle"===n.field.type?s.default.createElement("label",{className:"x-settings-secondColumn x-toggle-wrapper"},s.default.createElement("input",{id:e,className:"x-toggle-input",type:"checkbox",checked:i,...n.field.events,onClick:e=>{r(e.currentTarget.checked);var t=n.field.events?.onClick;t&&t(e)}}),s.default.createElement("span",{className:"x-toggle-indicatorWrapper"},s.default.createElement("span",{className:"x-toggle-indicator"}))):"dropdown"===n.field.type?s.default.createElement("select",{className:"main-dropDown-dropDown",id:e,...n.field.events,onChange:e=>{r(n.field.options[e.currentTarget.selectedIndex]);var t=n.field.events?.onChange;t&&t(e)}},n.field.options.map((e,t)=>s.default.createElement("option",{selected:e===i,value:t+1},e))):s.default.createElement(s.default.Fragment,null)))}}},l=async function e(){const{Platform:t,Menu:n,PopupModal:l,ReactDOM:r,React:s,LocalStorage:i}=Spicetify,a=t.PlaybackAPI;if(t&&n&&a&&l&&s&&r&&i){const g=await C(".volume-bar.main-nowPlayingBar-volumeBar");var o=await C(".volume-bar__slider-container",g),o=Spicetify.Tippy(o,(o=((e,t)=>{for(var n in t=t||{})x.call(t,n)&&E(e,n,t[n]);if(b)for(var n of b(t))S.call(t,n)&&E(e,n,t[n]);return e})({},Spicetify.TippyProps),v(o,w({delay:0,interactive:!0,hideOnClick:!1,interactiveBorder:20}))));const h=document.createElement("input");h.id="volume-plus-input",h.style.background="none",h.style.padding="0",h.style.border="0",h.style.textAlign="center",h.style.fontSize="1em",h.style.minWidth="1ch",h.style.maxWidth="3ch",h.style.color="var(--spice-text)",h.type="text",h.maxLength=3,h.addEventListener("change",()=>{a.setVolume(Number(h.value)/100)}),h.addEventListener("keydown",c),u(),a._events.addListener("volume",u),p(),h.addEventListener("input",p);var d=document.createElement("style");d.textContent=`
		#volume-plus-input::-webkit-outer-spin-button,
		#volume-plus-input::-webkit-inner-spin-button {
			-webkit-appearance: none;
			margin: 0;
		}

		#${o.popper.id} .main-contextMenu-tippy:after {
			content: "%";
		}
	`,(o=await C(".main-contextMenu-tippy",o.popper)).appendChild(h),o.appendChild(d);const y=new k("","volume-plus-settings");m("default-increment","Default mouse wheel increment","5"),m("shift-increment","Mouse wheel increment while holding Shift","10"),m("ctrl-increment","Mouse wheel increment while holding Ctrl","1"),new n.Item("Volume+",!1,()=>{var e=document.createElement("div");e.id=y.settingsId,r.render(s.createElement(y.FieldsContainer,null),e),l.display({title:"Volume+",content:e,isLarge:!0})},`<?xml version="1.0" encoding="utf-8"?><svg version="1.1" id="volume-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 16 16" style="enable-background:new 0 0 16 16;" xml:space="preserve"><path d="M14.9,8c0-0.4-0.3-0.8-0.7-0.8c0,0,0,0,0,0l-2.1,0V5.2c0-0.4-0.4-0.7-0.8-0.7c-0.4,0-0.7,0.3-0.7,0.7l0,2.1H8.5
    C8.1,7.2,7.7,7.6,7.7,8c0,0.4,0.3,0.8,0.7,0.8c0,0,0,0,0.1,0h2.1v2.1c0,0.4,0.4,0.7,0.8,0.7c0.4,0,0.7-0.3,0.7-0.7l0-2.1h2.1
    C14.6,8.8,14.9,8.4,14.9,8z"/><path d="M10.1,1.5c0-0.4-0.3-0.8-0.7-0.8c-0.1,0-0.3,0-0.4,0.1l-6.9,4c-1.7,1-2.3,3.2-1.3,5c0.3,0.6,0.8,1,1.3,1.3l6.9,4    c0.4,0.2,0.8,0.1,1-0.3c0.1-0.1,0.1-0.2,0.1-0.4v-1.9c-0.5-0.1-1-0.4-1.5-0.7v1.3L2.8,9.9C1.8,9.3,1.4,8,2,6.9    c0.2-0.3,0.5-0.6,0.8-0.8l5.8-3.3v1.3c0.4-0.3,1-0.5,1.5-0.7V1.5z"/></svg>`).register();let i=!1;function c(e){1==e.key.length&&isNaN(Number(e.key))&&e.preventDefault()}function u(){h.value=""+Math.round(100*a._volume),p()}function p(){h.style.maxWidth=h.value.length+"ch"}function m(e,t,n){y.getFieldValue(e)||y.setFieldValue(e,n),y.addInput(e,t,n,void 0,void 0,{type:"number",min:1,max:100,onKeyDown:c})}function f(e){var t,n;i||(i=!0,e=a._volume+e,t=0,n=1,e=Math.min(Math.max(e,t),n),a.setVolume(e),0==e||1==e?i=!1:a._events.addListener("volume",()=>{i=!1},{once:!0}))}g.addEventListener("wheel",e=>{e.stopPropagation();let t;t=e.getModifierState("Shift")?"shift-increment":e.getModifierState("Control")?(e.preventDefault(),"ctrl-increment"):"default-increment";var n=Number(y.getFieldValue(t))/100;f(-Math.sign(e.deltaY)*n)}),document.addEventListener("keydown",t=>{if(("ArrowLeft"==t.key||"ArrowRight"==t.key||"ArrowUp"==t.key||"ArrowDown"==t.key)&&g.matches(":hover")){t.stopPropagation(),t.preventDefault();let e=0;"ArrowLeft"==t.key||"ArrowRight"==t.key?(e=Number(y.getFieldValue("default-increment")),"ArrowLeft"==t.key&&(e=-e)):"ArrowUp"!=t.key&&"ArrowDown"!=t.key||(e=Number(y.getFieldValue("shift-increment")),"ArrowDown"==t.key&&(e=-e)),f(e/100)}})}else setTimeout(e,250)},(async()=>{await l()})();function C(l,r=document.body){return new Promise(n=>{var e=r.querySelector(l);if(e)return n(e);const i=new MutationObserver(e=>{var t=r.querySelector(l);t&&(i.disconnect(),n(t))});i.observe(r,{childList:!0,subtree:!0})})}(async()=>{var e;document.getElementById("volumeDplus")||((e=document.createElement("style")).id="volumeDplus",e.textContent=String.raw`
  .x-settings-section{display:grid;gap:8px}.x-settings-row{display:grid;gap:8px 24px;grid-template-columns:2fr 1fr}.x-settings-firstColumn,.x-settings-secondColumn{display:flex;align-items:center}.x-settings-secondColumn{justify-content:flex-end;position:relative}.x-settings-input{background:rgba(var(--spice-rgb-selected-row),.1);background-color:var(--spice-tab-active);border:1px solid transparent;border-radius:4px;color:var(--spice-text);font-family:inherit;font-size:14px;height:40px;padding:0 12px;width:100%}
      `.trim(),document.head.appendChild(e))})()}();